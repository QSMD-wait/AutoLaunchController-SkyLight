# AutoLaunchController 代码注释规范指南

## 1. 核心思想：专业与友好并存

代码注释是写给未来的自己和团队成员的说明书。一套优秀的注释规范应兼具 **专业性** 和 **对初学者的友好性**。

- **专业性**: 遵循业界标准，结构清晰，能够被工具（如 IDE）识别和利用。
- **友好性**: 易于理解，能够快速传达代码的意图、使用场景和注意事项。

本指南将注释分为两类：**公开 API 注释** 和 **实现细节注释**。

## 2. 公开 API 注释规范 (对外)

此类注释用于描述所有 `public` 的类、接口、方法和属性。它们是模块对外的“承诺”，必须清晰、详尽。

**规范**: **必须** 使用 `///` XML 文档注释。

### 2.1 核心 XML 标签

| 标签 | 用途 | 要求 |
| :--- | :--- | :--- |
| `<summary>` | 简明扼要地描述成员的作用（“它是干什么的”）。 | **必需** |
| `<param name="name">` | 描述该参数的用途和期望。 | 方法参数**必需** |
| `<returns>` | 描述方法的返回值及其含义。 | 有返回值的方法**必需** |
| `<remarks>` | 提供更详尽的说明，是体现“友好性”的关键。 | **强烈推荐** |
| `<see cref="member"/>` | 创建一个指向其他代码成员的可点击链接。 | **推荐** |
| `<exception cref="type">`| 描述可能抛出的异常类型及条件。 | **推荐** |

### 2.2 如何写好 `<remarks>`

`<remarks>` 标签是与阅读者沟通的桥梁。推荐包含以下内容：

1.  **[使用场景]**: 描述通常在什么情况下会使用这个成员。
2.  **[工作原理]**: （可选）对于复杂逻辑，使用简单的类比来帮助理解。
3.  **[最佳实践]**: 明确告知使用此成员时应注意的事项或推荐的调用顺序。

### 2.3 完整示例

```csharp
/// <summary>
/// 根据应用程序配置，初始化全局日志系统。
/// </summary>
/// <param name="settings">从 settings.json 加载的应用程序设置。</param>
/// <remarks>
/// <para>
///     [使用场景]：这是应用程序启动时必须调用的核心服务之一，通常在 <c>App.xaml.cs</c> 的 <c>OnStartup</c> 方法中执行。
/// </para>
/// <para>
///     [工作原理]：您可以把这个方法想象成“日志系统启动器”。它会读取您的配置，然后同时打开两个“日志记录本”：
///     1. 一个是实时显示在开发工具里的“电子草稿本”（控制台输出）。
///     2. 另一个是保存在硬盘上的“永久档案本”（日志文件）。
/// </para>
/// <para>
///     [最佳实践]：请确保在应用程序正常退出时，调用 <see cref="Shutdown"/> 方法。这就像是告诉“档案管理员”：“今天的工作结束了，请把档案本整理好归档。”
/// </para>
/// </remarks>
/// <exception cref="ArgumentNullException">当 <paramref name="settings"/> 为 null 时抛出。</exception>
public static void Initialize(AppSettings settings)
{
    // ...
}
```
### 2.4 注释分级策略

为了在“清晰性”和“简洁性”之间取得平衡，我们采用分级注释策略。

#### 简单场景：核心摘要

对于逻辑简单、职责单一的公共成员（属性、简单方法等），**仅需提供 `<summary>` 标签**。这足以让调用者快速理解其功能，而不会被不必要的细节淹没。

## 3. 实现细节注释规范 (对内)

此类注释用于解释方法**内部**的复杂逻辑、不明显的业务规则或技术选择。

**规范**: 使用 `//` 单行注释。

**核心原则**: **多解释“为什么”，少解释“做什么”**。代码本身应清晰地表达“做什么”。

### 3.1 推荐用法

1.  **分步解释复杂逻辑**:
    ```csharp
    // 1. 构造日志文件的完整路径。
    var logPath = Path.Combine(LogDirectory, "ALC-.log");

    // 2. 将配置文件中的字符串级别转换为 Serilog 的枚举类型。
    var logLevel = GetLogLevel(settings.LogLevel);
    ```

2.  **解释“魔法值”或硬编码字符串**:
    ```csharp
    // 使用 7 天作为日志文件的保留上限，这是一个业务和存储空间的平衡点。
    retainedFileCountLimit: 7,
    ```

3.  **解释技术选型的原因**:
    ```csharp
    // 考虑到日志初始化是一次性操作，且需要全局访问，这里设计为静态类以简化调用。
    public static class LogManager
    {
        // ...
    }
    ```

### 3.2 应避免的用法

避免对显而易见的代码进行注释。

```csharp
// 坏例子：注释是多余的
// 循环遍历用户
foreach (var user in users)

// 好例子：代码本身已经自解释了
foreach (var user in users)
```

## 4. 黄金法则：保持更新

**过时的注释比没有注释更危险。**

在修改代码逻辑时，必须同步检查并更新相关的注释，确保代码和文档的一致性。